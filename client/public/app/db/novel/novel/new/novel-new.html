<div class="animated fadeIn">
  <div class="no-banner"></div>
  <div class="container">
    <div class="container">
      <ol class="breadcrumb">
        <li class="breadcrumb-item">
          <a ui-sref="home">メインページ</a>
        </li>
        <li class="breadcrumb-item">
          <a>データベース</a>
        </li>
        <li class="breadcrumb-item">
          <a ui-sref="novel.list({ page: 1, length: null })">全てのノベル</a>
        </li>
        <li class="breadcrumb-item active">
          新しいノベルを作る
        </li>
      </ol>
    </div>
  </div>

  <div class="page-head">
    <div class="container">
      <h3>新しいノベルを作る</h3>
      <h6>Create new novel</h6>
    </div>
  </div>

  <div class="container page-body">
    <div class="body row">
      <div class="content col-xl-9">
        <form novalidate name="form" ng-submit="vm.submit(vm.novel)">
          <div class="row">
            <div class="col-lg-9 col-7 col-md-8">
              <div class="form-group"
                ng-class="{ 'has-danger': (form.$submitted || form.title.$touched) && form.title.$invalid }">
                <label for="_title" class="form-control-label">*タイトル</label>
                <input type="text" class="form-control" name="title" id="_title"
                  ng-model="vm.novel.title" autocomplete="off" required>
                <small id="titleHelp" class="form-text text-muted">日本語でお願いします。</small>
                <div class="form-control-feedback" ng-show="form.$submitted || form.title.$touched">
                  <span ng-show="form.title.$error.required" class="ng-show-hide-animate">
                    Title can't be empty.
                  </span>
                </div>
              </div>

              <div class="form-group">
                <label for="_titleEn">タイトル(英語)</label>
                <input type="text" class="form-control" name="titleEn" id="_titleEn"
                  ng-model="vm.novel.titleEn" autocomplete="off">
                <small id="titleEnHelp" class="form-text text-muted">
                  英語でお願いします。
                </small>
              </div>

              <div class="form-group"
                ng-class="{ 'has-danger': (form.$submitted || form.length.$touched) && form.length.$invalid }">
                <label for="_length" class="form-control-label">*長さ</label>
                <select id="_length" name="length" class="form-control"
                  ng-options="l.id as l.label for l in vm.length"
                  ng-model="vm.novel.length" required>
                </select>
                <div class="form-control-feedback"
                  ng-show="form.$submitted || form.length.$touched">
                  <span ng-show="form.length.$error.required" class="ng-show-hide-animate">
                    Length can't be empty.
                  </span>
                </div>
              </div>
            </div>

            <div class="col-lg-3 col-5 col-md-4">
              <div class="image-placeholder ratio-3_4">
                <div image-thumb class="image-thumb"
                  condition="vm.hideNsfw && vm.novel.imageNsfw" image-change="true"
                  nsfw="/assets/img/image-nsfw.jpg" image="{{ vm.novel.image }}">
                </div>
              </div>
            </div>
          </div>

          <div class="form-check pull-right">
            <label class="form-check-label">
              <input type="checkbox" class="form-check-input"
                ng-model="vm.novel.imageNsfw" ng-click="vm.log()">
              *NSFW写真
            </label>
          </div>

          <div class="form-group"
            ng-class="{ 'has-danger': (form.$submitted || form.image.$touched) && form.image.$invalid }">
            <label for="_image" class="form-control-label">*写真</label>
            <input type="text" class="form-control" name="image" id="_image"
              ng-model="vm.novel.image" autocomplete="off" required>
            <small id="titleHelp" class="form-text text-muted">
              Image URL looks like: http(s):// blah..blah .[jpg|png|jpeg]<br>
              i.e. https://s.vndb.org/cv/31/31631.jpg
            </small>

            <div class="form-control-feedback" ng-show="form.$submitted || form.image.$touched">
              <span ng-show="form.image.$error.required" class="ng-show-hide-animate">
                Image can't be empty.
              </span>
            </div>
          </div>

          <div class="form-group">
            <label>ディスクリプション</label>
            <textarea type="text" class="form-control" rows="6"
              name="description" ng-model="vm.novel.description"></textarea>
            <small id="descriptionHelp" class="form-text text-muted">
              日本語でお願いします。
            </small>
          </div>

          <div class="form-group">
            <label>ディスクリプション(英語)</label>
            <textarea type="text" class="form-control" rows="6"
              name="descriptionEn" ng-model="vm.novel.descriptionEn"></textarea>
            <small id="descriptionEnHelp" class="form-text text-muted">英語でお願いします。</small>
          </div>

          <div class="form-group form-success animated fadeIn"
            ng-show="vm.message">
            <h6 ng-repeat="(key, value) in vm.message">{{ value }}</h6>
            <h6><a ui-sref="novel.detail({ id: vm.result.id })">行く</a></h6>
          </div>

          <div class="form-group form-error animated fadeIn"
            ng-show="vm.error">
            <h6 ng-repeat="(key, value) in vm.error">{{ value }}</h6>
          </div>

          <button class="btn-c btn-c-5 btn-c-5-sakura pull-right">提出する</button>
          <div class="clearfix"></div>
        </form>
      </div>

      <aside class="col-lg-3 item-container">
        <div class="item-group">
          <h6>Quick tool</h6>
          <div class="item item-box quick-tool-group">
            <div class="nsfw">
              <span>
                <label class="switch-button">
                  <input type="checkbox" ng-model="vm.hideNsfw">
                  <div class="slider"></div>
                </label>
              </span>
              <span>Hコンテンツを消す</span>
            </div>
          </div>
        </div>
      </aside>
    </div>
  </div>
</div>
